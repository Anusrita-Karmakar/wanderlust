<% layout('/layouts/boilerplate') -%>
  <body>
   
    <!-- <h3 style="font-weight:600; font-family: Plus Jakarta Sans">All Listings</h3> -->
    <!-- <form method="GET" action="/listings/new">
      <button>Create New Listing</button>
    </form> -->
    <style>
      #filters{
        
        display: flex;
        flex-wrap: wrap;
        align-items: center;
      }
      .filters{
        text-align: center;
        margin-right: 2rem;
        margin-top: 1rem;
        opacity: 0.6;
      }
      .filters:hover{
        opacity:1;
        cursor:pointer;
      }
      .filters p{
        font-size:0.8rem;
        
      }
      .taxInfo{
        display:none;
      }
      .tax-toggle{
        border:1px solid black;
        border-radius: 1rem;
        height:1.75rem;
        padding-left:0.5rem;
        padding-right: 0.5rem;
        padding-bottom:0.25rem;
        margin-left: 1rem;
        display:flex;
        align-items:center;
      }
      .icon{
        border:none;
        text-decoration: none;
        background-color: white;
      }
      .form-check-label{
        font-size:small;
      }
    </style>
    
    <div id="filters" class="collapse navbar-collapse">
      <form action="/listings">
      <div class="filters">
        <button class="icon"><i class="fa-solid fa-fire"></i><p>Trending</p></button>
        
      </div>
    </form>
    
      <form method="GET" action="/listings/filters/Mountains">
        <div class="filters">
          <button class="icon"><i class="fa-solid fa-mountain-sun"></i><p>Mountains</p></button>
          
        </div>
      </form>
      
      <form method="GET" action="/listings/filters/Iconic-city">
      <div class="filters">
        <button class="icon"><i class="fa-solid fa-city"></i></button>
        <p>Iconic city</p>
      </div>
    </form>

    <form method="GET" action="/listings/filters/Beach">
      <div class="filters">
        <button class="icon"><i class="fa-solid fa-umbrella-beach"></i> <p>Beach</p></button>
       
      </div>
    </form>
      

    <form method="GET" action="/listings/filters/Castles">
      <div class="filters">
        <button class="icon"><i class="fa-brands fa-fort-awesome"></i><p>Castles</p></button>
        
      </div>
    </form>
      
    <form method="GET" action="/listings/filters/Amazing-pools">
      <div class="filters">
        <button class="icon"><i class="fa-solid fa-person-swimming"></i><p>Amazing pools</p></button>
        <!-- <p>Amazing pools</p> -->
      </div>
    </form>

      
    <form method="GET" action="/listings/filters/Camping">
      <div class="filters">
        <button class="icon"><i class="fa-solid fa-campground"></i><p>Camping</p></button>
        
      </div>
    </form>

      
    <form method="GET" action="/listings/filters/Farms">
      <div class="filters">
        <button class="icon"><i class="fa-solid fa-cow"></i><p>Farms</p></button>
        
      </div>
    </form>

    <form method="GET" action="/listings/filters/Arctic">
      <div class="filters">
        <button class="icon"><i class="fa-solid fa-snowflake"></i><p>Arctic</p></button>
        
      </div>
    </form>

    <form method="GET" action="/listings/filters/Boats">
      <div class="filters">
        <button class="icon"><i class="fa-solid fa-sailboat"></i><p>Boats</p></button>
        
      </div>
    </form>

    <form method="GET" action="/listings/filters/Rooms">
      <div class="filters">
        <button class="icon"><i class="fa-solid fa-bed"></i><p>Rooms</p></button>
        
      </div>
    </form>

      
      <div class="tax-toggle">
        <div class="form-check-reverse form-switch" style="color:rgb(118, 122, 124);">
        <input class="form-check-input" type="checkbox" role="switch" id="flexSwitchCheckDefault" >
        <label class="form-check-label" for="flexSwitchCheckDefault">Display total after taxes </label>
      </div>
    </div>
      
    </div>
    <div class="row row-cols-lg-3 row-cols-md-2 row-cols-sm-1 mt-3 ">
      <% for(let listing of allListings) { %>
        <a href="/listings/<%=listing._id%>" class="listing-link">
          <div class="card col listing-card" style="width: 20rem;">
            <img src="<%=listing.image.url%>" 
              class="card-img-top" 
              alt="listings-image"
              style="height: 20rem; width:25rem;">
            <div class="card-img-overlay" style="height: 20rem; width: 25rem;">
              
            </div>
            <div class="card-body">
              <p class="card-text">
                <b><%=listing.title%></b>
                <br>
                &#8377; <%= listing.price.toLocaleString("en-IN")%> / night
                <i class="taxInfo"> &nbsp; &nbsp;+18% GST</i>
              </p>
            </div>
          </div>
      </a>
      <% } %>
    </div>
    
    <script>
      let taxSwitch=document.getElementById("flexSwitchCheckDefault");
      taxSwitch.addEventListener("click",()=>{
      let taxinfo=document.getElementsByClassName("taxInfo") ;
      for(info of taxinfo){
        if(info.style.display!="inline"){
          info.style.display="inline";
        }
        else{
          info.style.display="none";
        }
      }
      });
    </script>
  </body>
